<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>用户列表</title>
    <link href="/css/bootstrap.css" rel="stylesheet">
    <script src="js/jQuery.js"></script>
    <script th:inline="javascript">
    	var flag = '[[${flag}]]';
    </script>
    <script>
    function jumpToClient1(){
    	
		$.ajax({
			type : 'post',
			url : 'http://localhost:8083/getSession',
			async : 'true',
			data : {"flag" : flag},
			datatype : 'json',
			cache : 'false',
			success : function(data){
				if(data == "true"){
					window.location.href="http://localhost:8083";
				}
			}
		});	
	}
    </script>
</head>

<style>
    a {
        color:#fff;
    }
    th {
        text-align: center;
    }
</style>

<body>
	<div th:if="${isAdmin} == 1">
    <button class="btn btn-primary form-control" style="height:50px"><a th:href="@{'/insertPage'}">添加用户</a></button>
    <table class="table table-striped table-bordered table-hover text-center">
        <thead>
            <tr style="text-align:center">
                <th>Id</th>
                <th>用户名</th>
                <th>密码</th>
                <th>姓名</th>
                <th>邮箱</th>
                <th>公司名称</th>
                <th>身份</th>
                <th>操作</th>
            </tr>
        </thead>
        <tbody>
           <tr th:each="users:${users}">
               <td th:text="${users.id}"></td>
               <td th:text="${users.username}"></td>
               <!-- <td th:text="${users.password}"></td> -->
               <td th:text="${users.password}"></td>
               <td th:text="${users.name}"></td>
               <td th:text="${users.email}"></td>
               <td th:text="${users.companyId}"></td>      
               <td th:if="${users.isAdmin} == 2">超级管理员</td>    
               <td th:if="${users.isAdmin} == 1">管理员</td>    
               <td th:if="${users.isAdmin} == 0">普通用户</td>    
               <td>
                   <a class="btn btn-primary" th:href="@{'/updatePage/'+${users.id}}">更改</a>
                   <a class="btn btn-danger" th:href="@{'/del/'+${users.id}}">删除</a>
               </td>
           </tr>
        </tbody>
    </table>
    </div>
    <div>
    	<!-- <a class="btn btn-primary" th:href="@{'/goto'}">进入系统B</a> -->
    	<button class="btn btn-primary form-control" style="height:50px" onclick="jumpToClient1()">点击进入系统B</button>
    </div>
</body>
</html>